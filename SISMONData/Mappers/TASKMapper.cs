
//------------------------------------------------------------------------------
// This file was generated by Cooperator Modeler, version 1.3.2.0
// Created: 12/09/2014 - 06:04 p.m.
// This is a partial class file. The other one is TASKMapper.Auto.cs
// You can edit this file as your wish.
//------------------------------------------------------------------------------

using SISMONRules.Objects;
using SISMONRules.Entities;
using Cooperator.Framework.Core;
using Cooperator.Framework.Data;
using Cooperator.Framework.Data.Exceptions;
using System.Data.Common;
using System.Reflection;
using System;

namespace SISMONRules.Mappers
{

    /// <summary>
    /// Mapper for TASK entity
    /// This class provide persistence methods for this entity
    /// </summary>
    public  partial class TASKMapper
    {
        // /// <summary>
        // /// Enables GetObjectBySQLText and GetObjectListBySQLText methods.
        // /// </summary>
        //protected override bool SQLQueriesEnabled()
        //{
        //    return true;
        //}

        // /// <summary>
        // /// Checks for security ritghs
        // /// </summary>
        //protected override bool CheckForSecurityRights(SecurityRights action, TASKList ObjectListOrEntityList)
        //{
        //    switch (action)
        //    {
        //        case SecurityRights.Read:
        //            return true;
        //        case SecurityRights.Insert:
        //            return true;
        //        case SecurityRights.Update:
        //            return true;
        //        case SecurityRights.Delete:
        //            return true;
        //    }
        //    return false;
        //}

        public TASKList GetAllBy_User(int Id_User)
        {
            try
            {
                TASKList lista = new TASKList();
                DbDataReader dr;
                dr = TASKMapper.Instance().GetAllByUser(Id_User);
                while (dr.Read())
                {
                    TASK item = new TASK(Convert.ToInt32(dr["Id_Task"]));
                    item.Initial_Cost = Convert.ToDecimal(dr["Initial_Cost"]);
                    item.Final_Cost = Convert.ToDecimal(dr["Final_Cost"]);
                    item.Title = Convert.ToString(dr["Title"]);
                    item.Start = Convert.ToDateTime(dr["Start"]);
                    item.Id_Project = Convert.ToInt32(dr["Id_Project"]);
                    item.ProjectName = Convert.ToString(dr["ProjectName"]);
                    lista.Add(item);
                }
                dr.Close();
                return lista;
            }
            catch (Exception ex)
            {
                throw ex;
            }

        }

        public TASKList GetAllTaskAlerts()
        {
            try
            {
                TASKList lista = new TASKList();
                DbDataReader dr;
                dr = TASKMapper.Instance().GetTaskAlerts();
                while (dr.Read())
                {
                    TASK item = new TASK();
                    item.CoordinatorEmail = Convert.ToString(dr["Email"]);
                    item.CoordinatorFullName = Convert.ToString(dr["Full_Name"]);
                    item.Title = Convert.ToString(dr["Title"]);
                    item.ProjectName = Convert.ToString(dr["Name"]);
                    item.FinalDateString = Convert.ToString(dr["FinalDate"]);
                    item.DaysLeft = Convert.ToString(dr["DaysLeft"]);
                    lista.Add(item);
                }
                dr.Close();
                return lista;
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }

    }

}


namespace SISMONRules.Loaders
{

    /// <summary>
    /// Loader for TASK entity
    /// This class provide get methods for this entity
    /// </summary>
    public partial class TASKLoader
    {
    }

}



